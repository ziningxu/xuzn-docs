import{d as g,q as S,u as b,Q as M,r as p,o as x,c as V,f as m,aH as h,a as s,w as l,e as c,b as k,aI as K,aJ as B,U as C,aK as E,aL as U}from"./index-yT4Q7vfC.js";const y={MD5(o){return o},SM2(o){return o},SM4(o){return o}},q=g({__name:"LoginForm",props:{onDone:{type:Function}},setup(o){const r=o,u=S(),a=b(),n=M({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]};async function f(){var e;const t={username:y.SM2(n.username),password:y.SM2(n.password)};await((e=u.value)==null?void 0:e.validate()),await a.login(t),r.onDone?r.onDone():location.reload()}function _(t){t instanceof KeyboardEvent&&t.code==="Enter"&&f()}return(t,e)=>{const w=p("el-input"),d=p("el-form-item"),D=p("el-form");return x(),V("div",null,[e[3]||(e[3]=m("div",{class:"login-header"},[m("img",{src:h}),m("span",null,"Admin")],-1)),s(D,{model:n,"label-width":"0",ref_key:"formRef",ref:u,rules:v},{default:l(()=>[s(d,{prop:"username"},{default:l(()=>[s(w,{"prefix-icon":c(K),modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=i=>n.username=i),clearable:"",placeholder:"请输入用户名",onKeydown:_},null,8,["prefix-icon","modelValue"])]),_:1}),s(d,{prop:"password"},{default:l(()=>[s(w,{"prefix-icon":c(B),modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=i=>n.password=i),type:"password","show-password":"",clearable:"",placeholder:"请输入密码",onKeydown:_},null,8,["prefix-icon","modelValue"])]),_:1}),s(d,null,{default:l(()=>[s(c(C),{size:"large",style:{width:"100%"},type:"primary",onClick:f},{default:l(()=>e[2]||(e[2]=[k(" 登录 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}}),L={class:"login-page"},R=g({__name:"index",setup(o){const r=E();function u(){const a=U();a.length?r.push(a[0]):r.push("/")}return(a,n)=>(x(),V("div",L,[s(q,{onDone:u})]))}});export{R as default};
