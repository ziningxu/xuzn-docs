import{H as d,_ as x}from"./UniExample.vue_vue_type_style_index_0_lang-CGFIJGpZ.js";import{d as b,r as g,o as k,f as S,w as u,g as e,a as t,b as r,e as n,n as p,E as R,h as s,i}from"./index-D07_PQ_t.js";import"./App-BTwiwmkJ.js";const a=""+new URL("uni1-DnrzPXGc.png",import.meta.url).href,w=""+new URL("uni2-DcSq3lX7.png",import.meta.url).href,f=""+new URL("uni3-BOemuMFP.png",import.meta.url).href,m=""+new URL("uni4-761uBCK1.png",import.meta.url).href,v=""+new URL("uni5-D_uBrlJg.png",import.meta.url).href,A=b({__name:"index",setup(U){return(P,l)=>{const y=g("el-alert"),o=g("el-image");return k(),S(n(x),null,{pre:u(()=>[e("div",null,[l[15]||(l[15]=e("h2",{"data-id":""},"文件结构",-1)),t(y,{type:"warning"},{default:u(()=>l[0]||(l[0]=[r("只介绍自定义的，常见就不介绍了")])),_:1}),l[16]||(l[16]=e("div",{style:{height:"15px"}},null,-1)),t(n(R),null,{default:u(()=>[t(o,{style:{width:"100px",height:"100px"},src:n(a),"preview-src-list":[n(a)],fit:"cover"},null,8,["src","preview-src-list"]),t(o,{style:{width:"100px",height:"100px"},src:n(w),"preview-src-list":[n(w)],fit:"cover"},null,8,["src","preview-src-list"])]),_:1}),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[1]||(l[1]=[r(" server ")])),_:1}),t(n(s),null,{default:u(()=>l[2]||(l[2]=[r(" 为服务目录，主要存放vite的插件 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[3]||(l[3]=[r(" src/appConst ")])),_:1}),t(n(s),null,{default:u(()=>l[4]||(l[4]=[r(" 为全局常量存放目录 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[5]||(l[5]=[r(" src/globalApi ")])),_:1}),t(n(s),null,{default:u(()=>l[6]||(l[6]=[r(" 为全局接口存放目录 ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[7]||(l[7]=[r(" 全局性的api才写在这里 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[8]||(l[8]=[r(" src/storage ")])),_:1}),t(n(s),null,{default:u(()=>l[9]||(l[9]=[r(" 请把缓存功能都统一放在此处，方便管理 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[10]||(l[10]=[r(" src/uni-temp ")])),_:1}),t(n(s),null,{default:u(()=>l[11]||(l[11]=[r(" 存放一个正删改查页面的模板 ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[12]||(l[12]=[r(" 后期会写命令行工具，进行命令生成 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[13]||(l[13]=[r(" src/initAppData.tsx ")])),_:1}),t(n(s),null,{default:u(()=>l[14]||(l[14]=[r(" 预留文件，初始化项目数据，比如把缓存的数据进行赋值 ")])),_:1})])]),l[138]||(l[138]=e("div",{style:{height:"15px"}},null,-1)),e("div",null,[t(n(i)),l[35]||(l[35]=e("h2",{"data-id":""},"批量页面引入功能",-1)),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[17]||(l[17]=[r(" server/toPagesPlugin.ts ")])),_:1}),t(n(s),null,{default:u(()=>l[18]||(l[18]=[r(" 可配置型，将指定目录中的指定文件，引入到指定文件中，代替 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[19]||(l[19]=[r(" import.meta.glob ")])),_:1}),t(n(s),null,{default:u(()=>l[20]||(l[20]=[r(" ，更加灵活和可配置，避免打包文件中出现明文路径，默认会将 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[21]||(l[21]=[r(" src/views ")])),_:1}),t(n(s),null,{default:u(()=>l[22]||(l[22]=[r(" 文件夹中的所有 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[23]||(l[23]=[r(" index.vue ")])),_:1}),t(n(s),null,{default:u(()=>l[24]||(l[24]=[r(" 使用异步引入存放于 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[25]||(l[25]=[r(" src/router/u_pages.ts ")])),_:1}),t(n(s),null,{default:u(()=>l[26]||(l[26]=[r(" 且此文件为自动生成无需上传，默认会git忽略 ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[27]||(l[27]=[r(" 后期会抽离到函数库中 ")])),_:1})]),l[36]||(l[36]=e("h3",{"data-id":"","data-level":"1"},"异步内容",-1)),t(o,{style:{width:"100px",height:"100px"},src:n(f),"preview-src-list":[n(f)],fit:"cover"},null,8,["src","preview-src-list"]),l[37]||(l[37]=e("h3",{"data-id":"","data-level":"1"},"同步内容",-1)),t(o,{style:{width:"100px",height:"100px"},src:n(m),"preview-src-list":[n(m)],fit:"cover"},null,8,["src","preview-src-list"]),l[38]||(l[38]=e("h3",{"data-id":"","data-level":"1"},"默认配置",-1)),e("p",null,[t(n(s),{type:"danger"},{default:u(()=>l[28]||(l[28]=[r(" 默认 ")])),_:1})]),t(n(d),null,{default:u(()=>l[29]||(l[29]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
// 默认配置既是将 ./src/views 文件夹中的 所有 index.vue 文件
// 在 ./src/router/u_pages.ts 文件中引入
toPagesPlugin()
`)],-1)])),_:1}),e("p",null,[t(n(s),{type:"danger"},{default:u(()=>l[30]||(l[30]=[r(" 覆盖 ")])),_:1})]),t(n(d),null,{default:u(()=>l[31]||(l[31]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
toPagesPlugin({
  // 遵循gitignore的语法
  // 只对匹配的值进行处理，如果是空，那下面的配置将没有意义
  includes: ['src/views/**/index.vue'],
  paths: [
    {
      // 可以指定多个文件夹
      dirs: ['./src/views'],
      // 输出到指定文件中
      outFile: './src/router/u_pages.ts',
    }
  ],
})
`)],-1)])),_:1}),l[39]||(l[39]=e("h3",{"data-id":"","data-level":"1"},"自定义配置",-1)),e("p",null,[t(n(s),{type:"danger"},{default:u(()=>l[32]||(l[32]=[r(" 自行处理输出结果 ")])),_:1})]),t(n(d),null,{default:u(()=>l[33]||(l[33]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
// formatItems是类似这样的集合，Mac和win有差异
// {
//   dir: '/Users/linxu/work/uni-docs/src/examples',
//   file: '/Users/linxu/work/uni-docs/src/examples/UniTable2.vue',
//   sk: 'UniTable2.vue',
//   abbSk: 'UniTable2',
//   formatSk: 'VW5pVGFibGUy',
//   sv: './UniTable2.vue',
//   formatSv: "() => import('./UniTable2.vue')",
//   outFile: '/Users/linxu/work/uni-docs/src/examples/u_pages.ts',
// }
export interface ToPagesItemFormatType {
  dir: string // 找到的文件，用户指定的目录
  file: string // 当前文件
  sk: string // 文件相对于 dir 的路径
  abbSk: string // 格式化后，会去掉 /index.vue 和 .vue
  formatSk: string // base64 加密 abbSk
  sv: string // 文件相对于输出文件的路径
  formatSv: string // 默认是异步
  outFile: string // 输出路径
}
toPagesPlugin({
  // 匹配 src/examples 文件夹下的所有 .vue 文件
  includes: ['src/examples/**/*.vue'],
  paths: [
    // 可以指定多条规则
    {
      // 指定文件夹
      dirs: ['./src/examples'],
      // 指定输出到哪个文件夹
      outFile: './src/examples/u_pages.ts',
      onAfterMerge(formatItems) {
        const arr = formatItems.map((o, i) => {
          const k1 = \`key\${i + 1}\`
          return {
            val: k1,
            key: o.abbSk,
            imp: \`import \${k1}  from '\${o.sv}'\`,
            imp1: \`import \${k1}_txt  from '\${o.sv}?txt'\`,
          }
        })
        const s1 = arr.map((o) => \`\${o.imp}\\n\${o.imp1}\`).join('\\n')
        const s2 = arr.map((o) => \`'\${o.key}': \${o.val},\\n'\${o.key}_txt': \${o.val}_txt\`).join(',\\n')
        // 返回一个字符串，会写入到输出文件中
        // 如果啥也不返回，可以自行写入到你想要的文件中
        return \`\${s1}\\nconst pages = {\\n\${s2}\\n};\\nexport default pages\`
      },
    },
  ],
}),
`)],-1)])),_:1}),e("p",null,[t(n(s),{type:"danger"},{default:u(()=>l[34]||(l[34]=[r(" 以上配置输出类似下面的内容 ")])),_:1})]),t(o,{style:{width:"100px",height:"100px"},src:n(v),"preview-src-list":[n(v)],fit:"cover"},null,8,["src","preview-src-list"])]),e("div",null,[t(n(i)),l[46]||(l[46]=e("h2",{"data-id":""},"项目常量",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[40]||(l[40]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[41]||(l[41]=[r(" src/appConst ")])),_:1}),t(n(s),null,{default:u(()=>l[42]||(l[42]=[r(" ， ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[43]||(l[43]=[r(" 全局常量存放 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[44]||(l[44]=[r(" getSMKey.ts ")])),_:1}),t(n(s),null,{default:u(()=>l[45]||(l[45]=[r(" 文件是为了将明文的关键秘钥token等字符分割，避免打包后太容易被扫描到 ")])),_:1})])]),e("div",null,[t(n(i)),l[52]||(l[52]=e("h2",{"data-id":""},"全局接口",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[47]||(l[47]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[48]||(l[48]=[r(" src/globalApi ")])),_:1}),t(n(s),null,{default:u(()=>l[49]||(l[49]=[r(" ， ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[50]||(l[50]=[r(" 全局接口存放 ")])),_:1}),t(n(s),null,{default:u(()=>l[51]||(l[51]=[r("， 页面接口请存放在页面文件夹中，以减少接口冗余 ")])),_:1})])]),e("div",null,[t(n(i)),l[55]||(l[55]=e("h2",{"data-id":""},"字体图标",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[53]||(l[53]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[54]||(l[54]=[r(" src/icons ")])),_:1})])]),e("div",null,[t(n(i)),l[76]||(l[76]=e("h2",{"data-id":""},"路由",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[56]||(l[56]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[57]||(l[57]=[r(" src/router ")])),_:1})]),l[77]||(l[77]=e("h3",{"data-id":"","data-level":"1"},"线上路由",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[58]||(l[58]=[r(" 登录成功后接口请求，菜单数据，配合 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[59]||(l[59]=[r(" vite插件toPagesPlugin ")])),_:1}),t(n(s),null,{default:u(()=>l[60]||(l[60]=[r(" ，将 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[61]||(l[61]=[r(" src/views/ ")])),_:1}),t(n(s),null,{default:u(()=>l[62]||(l[62]=[r(" 目录中所有 ")])),_:1}),t(n(s),null,{default:u(()=>l[63]||(l[63]=[r(" index.vue ")])),_:1}),t(n(s),null,{default:u(()=>l[64]||(l[64]=[r(" 文件在 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[65]||(l[65]=[r(" src/router/u_pages.ts ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[66]||(l[66]=[r(" 文件中引用并输出类似 ")])),_:1}),t(o,{style:{width:"50px",height:"50px"},src:n(f),"preview-src-list":[n(f)],fit:"cover"},null,8,["src","preview-src-list"]),t(n(s),null,{default:u(()=>l[67]||(l[67]=[r(" 的内容，其中 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[68]||(l[68]=[r(" key是base64包装的 ")])),_:1}),t(n(s),null,{default:u(()=>l[69]||(l[69]=[r(" ，用于避免路径直接暴露，被扫描到，也方便后期批量更改加密方式 ")])),_:1})]),l[78]||(l[78]=e("h3",{"data-id":"","data-level":"1"},"本地路由",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[70]||(l[70]=[r(" 线上路由和本地路由是可以混合使用的，顺序问题可以使用 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[71]||(l[71]=[r(" meta.menuSort ")])),_:1}),t(n(s),null,{default:u(()=>l[72]||(l[72]=[r(" 进行配置 ")])),_:1})]),e("p",null,[t(n(s),null,{default:u(()=>l[73]||(l[73]=[r(" 本地路由入口文件 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[74]||(l[74]=[r(" src/router/routes.tsx ")])),_:1})]),l[79]||(l[79]=e("h3",{"data-id":"","data-level":"1"},"meta扩展",-1)),t(n(d),null,{default:u(()=>l[75]||(l[75]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
interface RouteMeta {
  isMenu?: boolean // 是否是菜单 默认true
  menuSort?: number // 菜单排序
  fullpage?: boolean // 是否业内全屏
}
          `)],-1)])),_:1})]),e("div",null,[t(n(i)),l[98]||(l[98]=e("h2",{"data-id":""},"本地缓存",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[80]||(l[80]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[81]||(l[81]=[r(" src/storage ")])),_:1})]),l[99]||(l[99]=e("h3",{"data-id":"","data-level":"1"},"基础缓存",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[82]||(l[82]=[r(" 对应所有的需要本地缓存的数据，请尽可能在此目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[83]||(l[83]=[r(" src/storage ")])),_:1}),t(n(s),null,{default:u(()=>l[84]||(l[84]=[r(" 中书写函数，然后其他地方进行引用，主要为了 ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[85]||(l[85]=[r(" 方便管理，控制冲突，避免重复缓存 ")])),_:1}),t(n(s),null,{default:u(()=>l[86]||(l[86]=[r(" 等问题 ")])),_:1})]),l[100]||(l[100]=e("h3",{"data-id":"","data-level":"1"},"接口缓存",-1)),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[87]||(l[87]=[r(" import { requestApi } from '@/utils/request' ")])),_:1}),t(n(s),null,{default:u(()=>l[88]||(l[88]=[r(" 这是封装好的，请求方法 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[89]||(l[89]=[r(" requestApi ")])),_:1}),t(n(s),null,{default:u(()=>l[90]||(l[90]=[r(" 中有 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[91]||(l[91]=[r(" cache ")])),_:1}),t(n(s),null,{default:u(()=>l[92]||(l[92]=[r(" 属性可以控制是否缓存接口，默认缓到 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[93]||(l[93]=[r(" session ")])),_:1})]),e("p",null,[t(n(s),null,{default:u(()=>l[94]||(l[94]=[r(" 扩展 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[95]||(l[95]=[r(" AxiosRequestConfig ")])),_:1}),t(n(s),null,{default:u(()=>l[96]||(l[96]=[r(" 如下 ")])),_:1})]),t(n(d),null,{default:u(()=>l[97]||(l[97]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
export interface UniRequestConfig extends AxiosRequestConfig {
  cache?: boolean // 是否需要缓存
  cacheKey?: string // 缓存的key，默认会使用接口的url
  cacheIsSession?: boolean // 是否使用session缓存，默认true，否则会使用localstorage
}
          `)],-1)])),_:1})]),e("div",null,[t(n(i)),l[109]||(l[109]=e("h2",{"data-id":""},"pinia状态管理",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[101]||(l[101]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[102]||(l[102]=[r(" src/store ")])),_:1})]),l[110]||(l[110]=e("h3",{"data-id":"","data-level":"1"},"项目数据",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[103]||(l[103]=[r(" 入口文件 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[104]||(l[104]=[r(" src/store/app.ts ")])),_:1})]),t(n(d),null,{default:u(()=>l[105]||(l[105]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
export interface AppState {
  showAppSetting: boolean // 打开全局配置界面
  showLogin: boolean // 展示登录界面
  showSearch: boolean // 展示搜索界面
  userInfo: Record<string, any> // 用户数据的原始数据
  menuList: RouteRecordRaw[] // 菜单列表，只包含请求的数据，不包含本地数据
  menuItems: RouteRecordRaw[] // 打平后的菜单数据，只包含请求的数据，不包含本地数据
  dictList: DictItemType[] // 字段列表
  showTopProgress: boolean // 显示顶部进度条
}
          `)],-1)])),_:1}),l[111]||(l[111]=e("h3",{"data-id":"","data-level":"1"},"用户数据",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[106]||(l[106]=[r(" 入口文件 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[107]||(l[107]=[r(" src/store/user.ts ")])),_:1})]),t(n(d),null,{default:u(()=>l[108]||(l[108]=[e("pre",null,[e("code",{class:p("line-numbers language-ts")},`
export interface UserState  {
  username: string
  realName: string
  mobilePhone: string
  userId: string
  email: string
  avatar: string
  gender: string
  idCardNo: string
  token: string
}
          `)],-1)])),_:1})]),e("div",null,[t(n(i)),l[120]||(l[120]=e("h2",{"data-id":""},"模板",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[112]||(l[112]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[113]||(l[113]=[r(" src/uni-temp ")])),_:1}),t(n(s),{type:"danger"},{default:u(()=>l[114]||(l[114]=[r(" 后期需要移除，通过命令行工具生成 ")])),_:1})]),e("p",null,[t(n(s),null,{default:u(()=>l[115]||(l[115]=[r(" 一个个的模板存放目录，比如 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[116]||(l[116]=[r(" tableTemp ")])),_:1}),t(n(s),null,{default:u(()=>l[117]||(l[117]=[r(" 目录中就是一个增删改查的模板，复制到 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[118]||(l[118]=[r(" src/views ")])),_:1}),t(n(s),null,{default:u(()=>l[119]||(l[119]=[r(" 目录中，可以直接生成一个表格数据的增删改查页面 ")])),_:1})])]),e("div",null,[t(n(i)),l[137]||(l[137]=e("h2",{"data-id":""},"页面",-1)),e("p",null,[t(n(s),null,{default:u(()=>l[121]||(l[121]=[r(" 存放目录 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[122]||(l[122]=[r(" src/views ")])),_:1})]),e("p",null,[t(n(s),null,{default:u(()=>l[123]||(l[123]=[r(" 每个页面定一个文件夹，文件家中包含基础的三个文件 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[124]||(l[124]=[r(" api.ts, server.ts, index.vue ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[125]||(l[125]=[r(" index.vue ")])),_:1}),t(n(s),null,{default:u(()=>l[126]||(l[126]=[r(" ：是页面入口文件 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[127]||(l[127]=[r(" api.ts ")])),_:1}),t(n(s),null,{default:u(()=>l[128]||(l[128]=[r(" ：是存放页面接口的文件 ")])),_:1})]),e("p",null,[t(n(s),{type:"warning"},{default:u(()=>l[129]||(l[129]=[r(" server.ts ")])),_:1}),t(n(s),null,{default:u(()=>l[130]||(l[130]=[r(" ：是服务函数或者页面常量存放的文件 ")])),_:1})]),e("p",null,[t(n(s),null,{default:u(()=>l[131]||(l[131]=[r(" 请尽可能保证，每个文件内容不超过 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[132]||(l[132]=[r(" 300 ")])),_:1}),t(n(s),null,{default:u(()=>l[133]||(l[133]=[r(" 行代码，便于阅读。 ")])),_:1}),t(n(s),null,{default:u(()=>l[134]||(l[134]=[r(" 特别是 ")])),_:1}),t(n(s),{type:"warning"},{default:u(()=>l[135]||(l[135]=[r(" .vue ")])),_:1}),t(n(s),null,{default:u(()=>l[136]||(l[136]=[r(" 文件，过长时请进行拆分，更加符合单一原则 ")])),_:1})])])]),_:1})}}});export{A as default};
